    <%
      if params[:id]
        default_start = @shift.start
        default_end = @shift.end
      elsif params[:xPercentage]
        default_start = (params[:date] ? Time.parse(params[:date]) : Time.now).to_date
        @dept_start_minutes ||= current_department.department_config.schedule_start
        @dept_end_minutes ||= current_department.department_config.schedule_end
        @minutes_per_day ||= (@dept_end_minutes - @dept_start_minutes)
        default_start += @dept_start_minutes.minutes
        default_start += (@minutes_per_day * params[:xPercentage].to_f / 60).to_int * 3600 #truncates the hour
#if the time slot starts off of the hour (at 9:30), this is not ideal because it will select either 9:00 or 10:00 and the following hour. We need timeslot validation first.
#if the schedule starts at 9:30, I'm not sure what happens ~Casey
        default_end = default_start + 1.hour
      else
        default_start = (params[:date] ? Time.parse(params[:date]) : Time.now).to_date
        default_end = default_start + 1.hour
      end
    %>

